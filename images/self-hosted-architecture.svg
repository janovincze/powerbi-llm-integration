<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 550" style="font-family: 'Segoe UI', system-ui, sans-serif;">
  <defs>
    <!-- Soft shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="4" flood-color="#8B7355" flood-opacity="0.15"/>
    </filter>

    <!-- Cream background gradient -->
    <linearGradient id="creamBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FDF8F3"/>
      <stop offset="100%" style="stop-color:#F8F1E9"/>
    </linearGradient>

    <!-- Terracotta gradient -->
    <linearGradient id="terracotta" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#D4896B"/>
      <stop offset="100%" style="stop-color:#C97B5D"/>
    </linearGradient>

    <!-- Light terracotta for secondary elements -->
    <linearGradient id="terracottaLight" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E8A88C"/>
      <stop offset="100%" style="stop-color:#DFA080"/>
    </linearGradient>

    <!-- Warm gray for cards -->
    <linearGradient id="cardBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFFFFF"/>
      <stop offset="100%" style="stop-color:#FAF6F1"/>
    </linearGradient>

    <!-- Secure boundary gradient -->
    <linearGradient id="secureBoundary" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F5EDE8"/>
      <stop offset="100%" style="stop-color:#EBE0D8"/>
    </linearGradient>

    <!-- Purple for vector DB -->
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9B8AC4"/>
      <stop offset="100%" style="stop-color:#7B6AA4"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="850" height="550" fill="url(#creamBg)"/>

  <!-- Subtle paper lines -->
  <g opacity="0.03" stroke="#8B7355" stroke-width="1">
    <line x1="0" y1="50" x2="850" y2="50"/>
    <line x1="0" y1="100" x2="850" y2="100"/>
    <line x1="0" y1="150" x2="850" y2="150"/>
    <line x1="0" y1="200" x2="850" y2="200"/>
    <line x1="0" y1="250" x2="850" y2="250"/>
    <line x1="0" y1="300" x2="850" y2="300"/>
    <line x1="0" y1="350" x2="850" y2="350"/>
    <line x1="0" y1="400" x2="850" y2="400"/>
    <line x1="0" y1="450" x2="850" y2="450"/>
    <line x1="0" y1="500" x2="850" y2="500"/>
  </g>

  <!-- Title -->
  <text x="425" y="35" text-anchor="middle" font-size="22" font-weight="600" fill="#5D4E3C">
    Self-Hosted Infrastructure
  </text>
  <text x="425" y="55" text-anchor="middle" font-size="12" fill="#8B7355">
    Fine-tuned Mistral 7B + RAG Pipeline — Complete data sovereignty
  </text>

  <!-- Your Infrastructure Boundary -->
  <g filter="url(#shadow)">
    <rect x="70" y="75" width="710" height="420" rx="16" fill="url(#secureBoundary)" stroke="#C97B5D" stroke-width="2" stroke-dasharray="8 4"/>
    <!-- Boundary label -->
    <rect x="300" y="63" width="250" height="24" rx="12" fill="url(#terracotta)"/>
    <text x="425" y="79" text-anchor="middle" font-size="11" font-weight="600" fill="#FFFFFF">
      Your Infrastructure (Secure Perimeter)
    </text>
  </g>

  <!-- Lock icon -->
  <g transform="translate(100, 90)">
    <circle cx="12" cy="12" r="10" fill="url(#terracotta)"/>
    <path d="M8 11 L8 9 Q8 6, 12 6 Q16 6, 16 9 L16 11" stroke="#FFFFFF" stroke-width="1.5" fill="none"/>
    <rect x="6" y="11" width="12" height="8" rx="2" fill="#FFFFFF"/>
  </g>
  <text x="130" y="100" font-size="9" fill="#C97B5D" font-weight="500">Zero Data Leaves</text>

  <!-- Context Sources Section -->
  <text x="180" y="130" text-anchor="middle" font-size="11" font-weight="600" fill="#5D4E3C">Context Sources</text>

  <!-- Confluence -->
  <g filter="url(#shadow)">
    <rect x="90" y="145" width="120" height="70" rx="8" fill="url(#cardBg)" stroke="#E8D5C4" stroke-width="1.5"/>
    <rect x="90" y="145" width="120" height="22" rx="8" fill="url(#terracottaLight)"/>
    <rect x="90" y="159" width="120" height="8" fill="url(#terracottaLight)"/>
    <text x="150" y="161" text-anchor="middle" font-size="10" font-weight="600" fill="#5D4E3C">Confluence</text>
    <text x="150" y="183" text-anchor="middle" font-size="8" fill="#8B7355">Business definitions</text>
    <text x="150" y="196" text-anchor="middle" font-size="8" fill="#8B7355">Process docs, glossary</text>
  </g>

  <!-- Snowflake Schema -->
  <g filter="url(#shadow)">
    <rect x="90" y="225" width="120" height="70" rx="8" fill="url(#cardBg)" stroke="#E8D5C4" stroke-width="1.5"/>
    <rect x="90" y="225" width="120" height="22" rx="8" fill="url(#terracottaLight)"/>
    <rect x="90" y="239" width="120" height="8" fill="url(#terracottaLight)"/>
    <text x="150" y="241" text-anchor="middle" font-size="10" font-weight="600" fill="#5D4E3C">Snowflake</text>
    <text x="150" y="263" text-anchor="middle" font-size="8" fill="#8B7355">Table DDL</text>
    <text x="150" y="276" text-anchor="middle" font-size="8" fill="#8B7355">Column descriptions</text>
  </g>

  <!-- dbt Manifest -->
  <g filter="url(#shadow)">
    <rect x="90" y="305" width="120" height="70" rx="8" fill="url(#cardBg)" stroke="#E8D5C4" stroke-width="1.5"/>
    <rect x="90" y="305" width="120" height="22" rx="8" fill="url(#terracottaLight)"/>
    <rect x="90" y="319" width="120" height="8" fill="url(#terracottaLight)"/>
    <text x="150" y="321" text-anchor="middle" font-size="10" font-weight="600" fill="#5D4E3C">dbt Manifest</text>
    <text x="150" y="343" text-anchor="middle" font-size="8" fill="#8B7355">Model lineage</text>
    <text x="150" y="356" text-anchor="middle" font-size="8" fill="#8B7355">Tests, documentation</text>
  </g>

  <!-- PowerBI Semantic -->
  <g filter="url(#shadow)">
    <rect x="90" y="385" width="120" height="70" rx="8" fill="url(#cardBg)" stroke="#E8D5C4" stroke-width="1.5"/>
    <rect x="90" y="385" width="120" height="22" rx="8" fill="url(#terracottaLight)"/>
    <rect x="90" y="399" width="120" height="8" fill="url(#terracottaLight)"/>
    <text x="150" y="401" text-anchor="middle" font-size="10" font-weight="600" fill="#5D4E3C">PowerBI Model</text>
    <text x="150" y="423" text-anchor="middle" font-size="8" fill="#8B7355">Measures, relationships</text>
    <text x="150" y="436" text-anchor="middle" font-size="8" fill="#8B7355">DAX logic</text>
  </g>

  <!-- Arrows from sources to Vector DB -->
  <g stroke="#C97B5D" stroke-width="2" fill="none" stroke-linecap="round">
    <path d="M210 180 L270 180 L270 290 L300 290"/>
    <path d="M210 260 L270 260 L270 290 L300 290"/>
    <path d="M210 340 L270 340 L270 310 L300 310"/>
    <path d="M210 420 L270 420 L270 310 L300 310"/>
  </g>

  <!-- Vector Database -->
  <g filter="url(#shadow)">
    <rect x="300" y="240" width="140" height="120" rx="10" fill="url(#cardBg)" stroke="#7B6AA4" stroke-width="2"/>
    <rect x="300" y="240" width="140" height="28" rx="10" fill="url(#purpleGrad)"/>
    <rect x="300" y="258" width="140" height="10" fill="url(#purpleGrad)"/>
    <text x="370" y="260" text-anchor="middle" font-size="11" font-weight="600" fill="#FFFFFF">Vector Database</text>

    <!-- DB icon -->
    <ellipse cx="370" cy="295" rx="25" ry="10" fill="#F5F0FA" stroke="#9B8AC4" stroke-width="1"/>
    <path d="M345 295 L345 320 Q345 330, 370 330 Q395 330, 395 320 L395 295" fill="#F5F0FA" stroke="#9B8AC4" stroke-width="1"/>
    <ellipse cx="370" cy="320" rx="25" ry="10" fill="none" stroke="#9B8AC4" stroke-width="1"/>

    <text x="370" y="350" text-anchor="middle" font-size="9" fill="#7B6AA4" font-weight="500">Qdrant / PGVector</text>
  </g>

  <!-- Arrow from Vector DB to Mistral -->
  <g stroke="#7B6AA4" stroke-width="2" fill="none" stroke-linecap="round">
    <path d="M440 300 L490 300"/>
    <path d="M482 293 L490 300 L482 307"/>
  </g>
  <text x="465" y="290" text-anchor="middle" font-size="8" fill="#7B6AA4">RAG Context</text>

  <!-- Mistral 7B Model -->
  <g filter="url(#shadow)">
    <rect x="490" y="200" width="180" height="200" rx="12" fill="url(#cardBg)" stroke="#C97B5D" stroke-width="2"/>
    <rect x="490" y="200" width="180" height="32" rx="12" fill="url(#terracotta)"/>
    <rect x="490" y="220" width="180" height="12" fill="url(#terracotta)"/>
    <text x="580" y="222" text-anchor="middle" font-size="12" font-weight="600" fill="#FFFFFF">Mistral 7B</text>

    <!-- Model details -->
    <text x="580" y="255" text-anchor="middle" font-size="10" font-weight="600" fill="#5D4E3C">Fine-Tuned with QLoRA</text>

    <rect x="510" y="270" width="140" height="50" rx="6" fill="#FAF6F1" stroke="#E8D5C4"/>
    <text x="580" y="290" text-anchor="middle" font-size="9" fill="#8B7355">LoRA Adapters</text>
    <text x="580" y="305" text-anchor="middle" font-size="8" fill="#C97B5D" font-weight="500">Domain-specific tuning</text>

    <text x="510" y="340" font-size="9" fill="#5D4E3C">4-bit quantization</text>
    <text x="510" y="355" font-size="9" fill="#5D4E3C">93%+ accuracy</text>
    <text x="510" y="370" font-size="9" fill="#5D4E3C">Runs on MacBook M1+</text>
    <text x="510" y="385" font-size="9" fill="#8B7355">or GPU server</text>
  </g>

  <!-- User Input -->
  <g filter="url(#shadow)">
    <rect x="490" y="110" width="180" height="60" rx="10" fill="url(#terracotta)"/>
    <text x="580" y="135" text-anchor="middle" font-size="10" font-weight="600" fill="#FFFFFF">User Query</text>
    <text x="580" y="152" text-anchor="middle" font-size="9" fill="#FFFFFF" opacity="0.9">"Show sales by region..."</text>
  </g>

  <!-- Arrow from User to Mistral -->
  <g stroke="#C97B5D" stroke-width="2" fill="none" stroke-linecap="round">
    <path d="M580 170 L580 200"/>
    <path d="M573 192 L580 200 L587 192"/>
  </g>

  <!-- Output / Iterative Refinement Section -->
  <g filter="url(#shadow)">
    <rect x="700" y="240" width="130" height="160" rx="10" fill="url(#cardBg)" stroke="#E8D5C4" stroke-width="1.5"/>
    <rect x="700" y="240" width="130" height="28" rx="10" fill="url(#terracottaLight)"/>
    <rect x="700" y="258" width="130" height="10" fill="url(#terracottaLight)"/>
    <text x="765" y="260" text-anchor="middle" font-size="10" font-weight="600" fill="#5D4E3C">Output</text>

    <text x="765" y="290" text-anchor="middle" font-size="9" fill="#5D4E3C" font-weight="500">SQL Queries</text>
    <text x="765" y="310" text-anchor="middle" font-size="9" fill="#5D4E3C" font-weight="500">DAX Measures</text>
    <text x="765" y="330" text-anchor="middle" font-size="9" fill="#5D4E3C" font-weight="500">Streamlit Code</text>

    <line x1="715" y1="345" x2="815" y2="345" stroke="#E8D5C4" stroke-width="1"/>

    <text x="765" y="365" text-anchor="middle" font-size="8" fill="#C97B5D" font-weight="500">Iterative Refinement</text>
    <text x="765" y="380" text-anchor="middle" font-size="8" fill="#8B7355">Execute → Analyze</text>
    <text x="765" y="393" text-anchor="middle" font-size="8" fill="#8B7355">→ Refine (safe!)</text>
  </g>

  <!-- Arrow from Mistral to Output -->
  <g stroke="#C97B5D" stroke-width="2" fill="none" stroke-linecap="round">
    <path d="M670 300 L700 300"/>
    <path d="M692 293 L700 300 L692 307"/>
  </g>

  <!-- Iterative loop arrow back -->
  <g stroke="#C97B5D" stroke-width="2" fill="none" stroke-linecap="round" stroke-dasharray="5 3">
    <path d="M765 400 L765 440 L580 440 L580 400"/>
    <path d="M573 408 L580 400 L587 408"/>
  </g>
  <text x="672" y="455" text-anchor="middle" font-size="8" fill="#C97B5D">Full data access for iteration</text>

  <!-- Hardware callout -->
  <g>
    <rect x="300" y="400" width="140" height="70" rx="8" fill="url(#cardBg)" stroke="#E8D5C4" stroke-width="1"/>
    <text x="370" y="420" text-anchor="middle" font-size="9" font-weight="600" fill="#5D4E3C">Hardware Options</text>
    <text x="370" y="438" text-anchor="middle" font-size="8" fill="#8B7355">Dev: MacBook M1/M2/M3</text>
    <text x="370" y="451" text-anchor="middle" font-size="8" fill="#8B7355">Prod: RTX 4090 / A100</text>
    <text x="370" y="464" text-anchor="middle" font-size="8" fill="#C97B5D">Cost: $0 → $15k+</text>
  </g>

  <!-- Decorative corner elements -->
  <g fill="none" stroke="#E8D5C4" stroke-width="1.5" opacity="0.6">
    <path d="M15 15 L15 40 M15 15 L40 15"/>
    <path d="M835 15 L835 40 M835 15 L810 15"/>
    <path d="M15 535 L15 510 M15 535 L40 535"/>
    <path d="M835 535 L835 510 M835 535 L810 535"/>
  </g>
</svg>
